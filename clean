#!/bin/sh

# clean old profiles that belong to old configurations
# check `/nix/store`
nh clean all

# clean old logs and coredumps (if any)
# check `/var/lib/systemd/coredump`
journalctl --rotate --vacuum-time=1h

# clean docker volumes and temporaries
# check `/var/lib/docker`
# NOTE: theoretically configured for auto-prune, yet docker managed to use
# ~60GiB of space in the background; make sure you're not alarmed by losing
# all docker volumes in the process; according to Docker docs, overlay2 uses
# a lot of space for `write-heavy` workloads; so there's your answer
docker system prune -af --volumes
